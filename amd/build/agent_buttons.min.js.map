{"version":3,"file":"agent_buttons.min.js","sources":["../src/agent_buttons.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Module providing functions to extract information from the form.\n *\n * @module     block_ai_chat/agent_buttons\n * @copyright  2025 ISB Bayern\n * @author     Philipp Memmel\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport * as DomExtractor from 'block_ai_chat/dom_extractor';\n\nexport const init = () => {\n    document.querySelectorAll('[data-block_ai_chat-action=\"accept_suggestion\"]').forEach(button => {\n        console.log(button)\n        button.addEventListener('click', (e) => {\n            console.log(button.dataset);\n            button.disabled = true;\n            const declineButton = document.querySelector('[data-block_ai_chat-action=\"decline_suggestion\"][data-block_ai_chat-for-element=\"' + button.dataset.block_ai_chatForElement + '\"]');\n            declineButton.disabled = true;\n            injectSuggestionIntoForm(button);\n        })\n    });\n\n    document.querySelectorAll('[data-block_ai_chat-action=\"decline_suggestion\"]').forEach(button => {\n        console.log(button)\n        button.addEventListener('click', (e) => {\n            console.log(button.dataset);\n            button.disabled = true;\n            const acceptButton = document.querySelector('[data-block_ai_chat-action=\"accept_suggestion\"][data-block_ai_chat-for-element=\"' + button.dataset.block_ai_chatForElement + '\"]');\n            acceptButton.disabled = true;\n        })\n    })\n\n};\n\nconst injectSuggestionIntoForm = (button) => {\n    const htmlElement = document.getElementById(button.dataset.block_ai_chatForElement);\n    console.log(\"NOW INJECTING\")\n    console.log(\"VALUE TO INJECT\")\n    console.log(button.dataset.block_ai_chatSuggestionvalue)\n    console.log(htmlElement)\n    htmlElement.value = button.dataset.block_ai_chatSuggestionvalue;\n    const formElements = DomExtractor.extractDomElements();\n    const relatedElement = formElements.filter(formElement => formElement.id === button.dataset.block_ai_chatForElement)[0];\n    console.log(relatedElement)\n    if (relatedElement.type === 'textarea') {\n        const tiny = window.tinymce.get(relatedElement.id);\n        if (tiny) {\n            tiny.setContent(button.dataset.block_ai_chatSuggestionvalue);\n        }\n    } else if (relatedElement.type === 'checkbox') {\n        console.log('its a checkbox')\n        if (parseInt(button.dataset.block_ai_chatSuggestionvalue) === 1) {\n            console.log(\"setting the check\")\n            htmlElement.checked = true;\n        } else {\n            console.log(\"deleteing the check\")\n            delete htmlElement.checked;\n        }\n        console.log(button.dataset.block_ai_chatSuggestionvalue)\n    }\n    console.log('html element after manipulation')\n    console.log(htmlElement);\n}"],"names":["document","querySelectorAll","forEach","button","console","log","addEventListener","e","dataset","disabled","querySelector","block_ai_chatForElement","injectSuggestionIntoForm","htmlElement","getElementById","block_ai_chatSuggestionvalue","value","relatedElement","DomExtractor","extractDomElements","filter","formElement","id","type","tiny","window","tinymce","get","setContent","parseInt","checked"],"mappings":";;;;;;;;kCA0BoB,KAChBA,SAASC,iBAAiB,mDAAmDC,SAAQC,SACjFC,QAAQC,IAAIF,QACZA,OAAOG,iBAAiB,SAAUC,IAC9BH,QAAQC,IAAIF,OAAOK,SACnBL,OAAOM,UAAW,EACIT,SAASU,cAAc,oFAAsFP,OAAOK,QAAQG,wBAA0B,MAC9JF,UAAW,EACzBG,yBAAyBT,cAIjCH,SAASC,iBAAiB,oDAAoDC,SAAQC,SAClFC,QAAQC,IAAIF,QACZA,OAAOG,iBAAiB,SAAUC,IAC9BH,QAAQC,IAAIF,OAAOK,SACnBL,OAAOM,UAAW,EACGT,SAASU,cAAc,mFAAqFP,OAAOK,QAAQG,wBAA0B,MAC7JF,UAAW,eAM9BG,yBAA4BT,eACxBU,YAAcb,SAASc,eAAeX,OAAOK,QAAQG,yBAC3DP,QAAQC,IAAI,iBACZD,QAAQC,IAAI,mBACZD,QAAQC,IAAIF,OAAOK,QAAQO,8BAC3BX,QAAQC,IAAIQ,aACZA,YAAYG,MAAQb,OAAOK,QAAQO,mCAE7BE,eADeC,aAAaC,qBACEC,QAAOC,aAAeA,YAAYC,KAAOnB,OAAOK,QAAQG,0BAAyB,MACrHP,QAAQC,IAAIY,gBACgB,aAAxBA,eAAeM,KAAqB,OAC9BC,KAAOC,OAAOC,QAAQC,IAAIV,eAAeK,IAC3CE,MACAA,KAAKI,WAAWzB,OAAOK,QAAQO,kCAEJ,aAAxBE,eAAeM,OACtBnB,QAAQC,IAAI,kBACkD,IAA1DwB,SAAS1B,OAAOK,QAAQO,+BACxBX,QAAQC,IAAI,qBACZQ,YAAYiB,SAAU,IAEtB1B,QAAQC,IAAI,8BACLQ,YAAYiB,SAEvB1B,QAAQC,IAAIF,OAAOK,QAAQO,+BAE/BX,QAAQC,IAAI,mCACZD,QAAQC,IAAIQ"}