define("block_ai_chat/utils",["exports","core/ajax","core/log","core/toast","core/str","core/notification"],(function(_exports,_ajax,_log,_toast,_str,_notification){var obj;Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.hash=_exports.callExternalFunctionReactiveUpdate=_exports.callExternalFunction=void 0,_log=(obj=_log)&&obj.__esModule?obj:{default:obj};const callExternalFunction=async(methodname,args)=>{let result=null,error=null;try{result=await(0,_ajax.call)([{methodname:methodname,args:args}])[0]}catch(ex){error=ex}if(null!==error)return await(0,_notification.exception)(error),null;if(result&&200!==result.code){let errorMessage=await(0,_str.getString)("errorwithcode","block_ai_chat",result.code);return result.message&&result.message.length>0&&(errorMessage+="<br/><br/>"+result.message),await showErrorToast(errorMessage),result.message&&result.message.length>0&&(_log.default.error("Error calling external function "+methodname),_log.default.error("Error message: "+result.message)),result.debuginfo&&result.debuginfo.length>0&&_log.default.error("Debuginfo: "+result.debuginfo),null}return result.content};_exports.callExternalFunction=callExternalFunction;_exports.callExternalFunctionReactiveUpdate=async(methodname,args)=>{let result=await callExternalFunction(methodname,args);return null!==result&&result.map((updateMessage=>(updateMessage.fields=JSON.parse(updateMessage.fields),updateMessage))),result};const showErrorToast=async message=>{await(0,_toast.add)(message,{type:"danger",autohide:!1,closeButton:!0})};_exports.hash=async stringToHash=>{const data=(new TextEncoder).encode(stringToHash),hashAsArrayBuffer=await window.crypto.subtle.digest("SHA-256",data),uint8ViewOfHash=new Uint8Array(hashAsArrayBuffer);return Array.from(uint8ViewOfHash).map((b=>b.toString(16).padStart(2,"0"))).join("")}}));

//# sourceMappingURL=utils.min.js.map