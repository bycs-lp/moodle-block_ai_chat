{"version":3,"file":"modal_init.min.js","sources":["../src/modal_init.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\nimport Modal from 'core/modal';\nimport * as ReactiveInit from 'block_ai_chat/reactive_init';\n\n\n/**\n * Initializes the AI chat modal.\n *\n * It also calls the initialization of the reactive main component which then will take care of\n * everything else.\n *\n * @param {int} contextid the context id of the used context\n */\nexport const init = async(contextid) => {\n    document.querySelector('#ai_chat_button').addEventListener('click', async() => {\n            const modal = await Modal.create({\n                template: 'block_ai_chat/modal',\n                show: false,\n                removeOnClose: false,\n                isVerticallyCentered: false\n            });\n            // We need to manually attach the modal to the DOM, because the reactive UI main component\n            // needs an element which already is present in the DOM.\n            modal.attachToDOM();\n            // Initializes the reactive UI.\n            await ReactiveInit.init(contextid, '.block_ai_chat_reactive_main_component', modal);\n        },\n        // We only want to attach the listener once, because this only does our initial spin up.\n        // After that the main component (block_ai_chat/components/main) which is created in the ReactiveInit\n        // handles the click on the button.\n        // However, we do not want the main component to do this initialization immediately, because\n        // we do not want to load all the information directly on site load, but only on first button click\n        // due to performance reasons.\n        {once: true}\n    );\n};\n"],"names":["async","document","querySelector","addEventListener","modal","Modal","create","template","show","removeOnClose","isVerticallyCentered","attachToDOM","ReactiveInit","init","contextid","once"],"mappings":"qtCA2BoBA,MAAAA,YAChBC,SAASC,cAAc,mBAAmBC,iBAAiB,SAASH,gBACtDI,YAAcC,eAAMC,OAAO,CAC7BC,SAAU,sBACVC,MAAM,EACNC,eAAe,EACfC,sBAAsB,IAI1BN,MAAMO,oBAEAC,aAAaC,KAAKC,UAAW,yCAA0CV,SAQjF,CAACW,MAAM"}