define("block_ai_chat/components/title",["exports","core/reactive","core/str","block_ai_chat/utils"],(function(_exports,_reactive,_str,_utils){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0;class Title extends _reactive.BaseComponent{constructor(){var obj,key,value;super(...arguments),value=null,(key="newDialogString")in(obj=this)?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}static init(target){return new this({element:document.querySelector(target)})}create(){this.name="title",this.selectors={TITLE:"[data-block_ai_chat-element='titleheading']"}}async stateReady(state){this.getElement(this.selectors.TITLE).innerText="",this.newDialogString=await(0,_str.getString)("newdialog","block_ai_chat");const title=state.messages.size>0?(0,_utils.stripHtmlTags)(state.messages.values().next().value.content):this.newDialogString;this.getElement(this.selectors.TITLE).innerText=title}getWatchers(){return[{watch:"messages:created",handler:this._updateTitleChat},{watch:"messages:deleted",handler:this._updateTitleChat},{watch:"config.view:updated",handler:this._updateTitle}]}_updateTitleChat(_ref){let{element:element}=_ref;"chat"===this.reactive.state.config.view&&(0!==this.reactive.state.messages.size?this.reactive.state.messages.values().next().value.id===element.id&&(this.getElement(this.selectors.TITLE).innerText=(0,_utils.stripHtmlTags)(element.content)):this.getElement(this.selectors.TITLE).innerText=this.newDialogString)}async _updateTitle(_ref2){let{element:element}=_ref2;if("history"===element.view){const historyString=await(0,_str.getString)("history","block_ai_chat");this.getElement(this.selectors.TITLE).innerText=historyString}else if("personalist"===element.view){const personalistString=await(0,_str.getString)("managepersona","block_ai_chat");this.getElement(this.selectors.TITLE).innerText=personalistString}}}var _default=Title;return _exports.default=_default,_exports.default}));

//# sourceMappingURL=title.min.js.map