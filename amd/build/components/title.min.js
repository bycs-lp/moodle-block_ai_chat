define("block_ai_chat/components/title",["exports","core/reactive","core/str","tiny_ai/utils"],(function(_exports,_reactive,_str,TinyAiUtils){function _getRequireWildcardCache(nodeInterop){if("function"!=typeof WeakMap)return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,TinyAiUtils=function(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(null===obj||"object"!=typeof obj&&"function"!=typeof obj)return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if("default"!==key&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(TinyAiUtils);class Title extends _reactive.BaseComponent{constructor(){var obj,key,value;super(...arguments),value=null,(key="newDialogString")in(obj=this)?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}static init(target){return new this({element:document.querySelector(target)})}create(){this.name="title"}async stateReady(state){this.getElement().innerText="",this.newDialogString=await(0,_str.getString)("newdialog","block_ai_chat");const title=state.messages.size>0?TinyAiUtils.stripHtmlTags(state.messages.values().next().value.content):this.newDialogString;this.getElement().innerText=title}getWatchers(){return[{watch:"messages:created",handler:this._updateTitleChat},{watch:"messages:deleted",handler:this._updateTitleChat},{watch:"config.view:updated",handler:this._updateTitle}]}_updateTitleChat(_ref){let{element:element}=_ref;"chat"===this.reactive.state.config.view&&(0!==this.reactive.state.messages.size?this.reactive.state.messages.values().next().value.id===element.id&&(this.getElement().innerText=element.content):this.getElement().innerText=this.newDialogString)}async _updateTitle(_ref2){let{element:element}=_ref2;if("history"===element.view){const historyString=await(0,_str.getString)("history","block_ai_chat");this.getElement().innerText=historyString}else if("personalist"===element.view){const personalistString=await(0,_str.getString)("managepersona","block_ai_chat");this.getElement().innerText=personalistString}}}var _default=Title;return _exports.default=_default,_exports.default}));

//# sourceMappingURL=title.min.js.map