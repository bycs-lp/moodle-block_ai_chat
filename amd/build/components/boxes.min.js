define("block_ai_chat/components/boxes",["exports","core/reactive","local_ai_manager/infobox","local_ai_manager/warningbox","local_ai_manager/events","core/utils"],(function(_exports,_reactive,_infobox,_warningbox,_events,_utils){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0;class Boxes extends _reactive.BaseComponent{static init(target){return new this({element:document.querySelector(target)})}create(){this.name="userquota",this.selectors={INFOBOX:"[data-block_ai_chat-element='ai_manager-infobox']",WARNINGBOX:"[data-block_ai_chat-element='ai_manager-warningbox']",MODAL_CONTENT:".modal-content",OUTPUT_WRAPPER:"[data-block_ai_chat-element='outputwrapper']"},this._debouncedCollapseBoxes=(0,_utils.debounce)(this._collapseBoxes.bind(this),250)}getWatchers(){return[{watch:"config.view:updated",handler:this._showOrHideBoxes},{watch:"messages.rendered:updated",handler:this._debouncedCollapseBoxes},{watch:"messages:deleted",handler:this._debouncedCollapseBoxes}]}async stateReady(){await this._renderBoxes()}async _renderBoxes(){await(0,_infobox.renderInfoBox)("block_ai_chat",this.reactive.state.config.userid,this.getElement(this.selectors.INFOBOX),["chat"]),await(0,_warningbox.renderWarningBox)(this.getElement(this.selectors.WARNINGBOX))}_showOrHideBoxes(){"chat"===this.reactive.state.config.view?(this.getElement(this.selectors.INFOBOX).classList.remove("d-none"),this.getElement(this.selectors.WARNINGBOX).classList.remove("d-none")):(this.getElement(this.selectors.INFOBOX).classList.add("d-none"),this.getElement(this.selectors.WARNINGBOX).classList.add("d-none"))}_collapseBoxes(){const chatOutputWrapper=this.getElement().closest(this.selectors.MODAL_CONTENT).querySelector(this.selectors.OUTPUT_WRAPPER),hasVisibleScrollbar=chatOutputWrapper.scrollHeight>chatOutputWrapper.clientHeight,infoboxTargetElement=this.getElement(this.selectors.INFOBOX),warningboxTargetElement=this.getElement(this.selectors.WARNINGBOX);hasVisibleScrollbar?(infoboxTargetElement.dispatchEvent(new CustomEvent(_events.events.collapseInfoBox)),warningboxTargetElement.dispatchEvent(new CustomEvent(_events.events.collapseWarningBox))):(infoboxTargetElement.dispatchEvent(new CustomEvent(_events.events.maximizeInfoBox)),warningboxTargetElement.dispatchEvent(new CustomEvent(_events.events.maximizeWarningBox)))}}var _default=Boxes;return _exports.default=_default,_exports.default}));

//# sourceMappingURL=boxes.min.js.map