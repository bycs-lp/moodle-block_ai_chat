{"version":3,"file":"dialog.min.js","sources":["../src/dialog.js"],"sourcesContent":["import {exception as displayException} from 'core/notification';\nimport Templates from 'core/templates';\n\n\nexport const init = (params) => {\n\n    // Attach click listener to the ai button.\n    let button = document.getElementById(\"ai_interface_button\");\n    button.addEventListener('mousedown', function() {\n        buildModal(params);\n    });\n};\n\n/**\n * Build modal for ai_interface.\n * @param {*} params\n */\nfunction buildModal(params) {\n    // Build iconpicker modal with moodle modal factory\n    Templates.renderForPromise('block_ai_interface/dialog', {params})\n        .then(({html}) => {\n            require(['jquery', 'core/modal_factory'], function($, ModalFactory) {\n                var trigger = $('#create-modal');\n                ModalFactory.create({\n                    title: params.title,\n                    body: html,\n                    footer: '',\n                }, trigger)\n                .done(function(modal) {\n                    modal.getRoot().on('modal:shown', function(e) {\n                        $(e.target).addClass('ai_interface_modal');\n                    });\n                    modal.show();\n                    // Wait for the modal to show and set focus.\n                    setTimeout(function() {\n                        const textarea = document.getElementById('block_ai_interface-input-id');\n                        textarea.focus();\n                    }, 175);\n                });\n            });\n            return true;\n        }).catch(ex => displayException(ex));\n}\n"],"names":["params","document","getElementById","addEventListener","renderForPromise","then","_ref","html","require","$","ModalFactory","trigger","create","title","body","footer","done","modal","getRoot","on","e","target","addClass","show","setTimeout","focus","catch","ex","buildModal"],"mappings":"kSAIqBA,SAGJC,SAASC,eAAe,uBAC9BC,iBAAiB,aAAa,qBASrBH,2BAENI,iBAAiB,4BAA6B,CAACJ,OAAAA,SACpDK,MAAKC,WAACC,KAACA,kBACJC,QAAQ,CAAC,SAAU,uBAAuB,SAASC,EAAGC,kBAC9CC,QAAUF,EAAE,iBAChBC,aAAaE,OAAO,CAChBC,MAAOb,OAAOa,MACdC,KAAMP,KACNQ,OAAQ,IACTJ,SACFK,MAAK,SAASC,OACXA,MAAMC,UAAUC,GAAG,eAAe,SAASC,GACvCX,EAAEW,EAAEC,QAAQC,SAAS,yBAEzBL,MAAMM,OAENC,YAAW,WACUvB,SAASC,eAAe,+BAChCuB,UACV,YAGJ,KACRC,OAAMC,KAAM,2BAAiBA,MAhChCC,CAAW5B"}